# vika2
вторая версия вики, более простая, но с явной практической целью 

описание прокета:
1) сущность сообщение
может быть в статусе: отправлено, ожидаю получение данных, новое.
готово к отправке - значит можем отправлят. у нас несколько групп, вк и тг например?
ожидает получение данных, допостим есть состовное сообщение и текста еще нет, может мы попали в этот момент? что делаем, ждем 10 сек. потом работаем как есть

2) таблица sender с информацией об отправки сообщений в различные группы

3) мутатор 
3.1) удалятор, удаляет не нужные рекламные блоки, вставки
3.2) добавлятор, добавляет мои вставки

4) цензор не берет рекласные посты, посты о дропшипенге, посты с авто

план работ:
1) для первой стадии, как можно быстрее, нужно постить мои сообщения в мой же чат.
оснавная цель сделать как можно быстнрее рабочий прототип и запустить его.  12 мая 2025 год

------------------------------------------------------------------------------------------------------------- 14 мая
у меня есть скрипт на питоне, который читает сообщения из телеграмма и отправляет сообщения в телеграмм.
я не знаю питон, поэтом у вторую часть я хочу сделать на руби. 
его задача
1) читать из базы сообщения, постоянно, в режими реального времени
2) определять пришло полностью сообщение или только его часть, если мы решили что часть(создаем новую сущность), возвращаемся к этому сообщеню через 10 сек.
3) если сообщение пришло полностю, то мы создаем новую сущность, в которой происходит цензурирование(класс цензор), вызываеться мутатор(удаляет часть сообщения, изменяет часть сообщения)
4) далее если все хорошо мы отправляем это новое сообщения используя эту сущность. скорее всего мы будем вызывать какой то питоновский скрипт который  это сделает

позже я буду использовать рельсы, но сейчас они мне ненужны, будут логи в базе. какое решение мне использовать сейчас? 
выбери 1 самый популярный вариант и опиши его, код пока не надо писать, просто в общем.

------------------------------------------------------------------------------------------------------------- 18мая
во вложении код проекта по копированию переделыванию и переотправки сообщений. вика2.
сейчас мы собираем из сообщения из меседж в message_items
проанализируй код и скажи по факту какие статусы могут быть у сообщения в message_items, не теоретически а то что сейчас в коде.


напиши код который будет запускаться паралельно основному процессу, его задача будет обрабатывать сообщения со статусом new
код должен использовать принцыпы ооп и солид
1)берем сообщения со статусом нью меняем статус на processing
1.1) в лог выводим информацию о сообщении ид, текст если есть, и то что поменяли статус
2) созадешь экзэмпляр класса цензор, в котором ты получаешь это сообщение из message_items
2.1) по порядку выызваються методы цензора, если хоть один вернет false статус меняем на censored_failed, если прошли то меняем на censored
2.2) в 1 из методов получи связанные сообщения из меседж и перебери имена sender_username если среди их есть список исключений(в методе сделай переменую, и в ней оправитель Dillertut или wkfedor) верни фелс
2.3) другой из методов проверит текст сообщения из message_items так же на слова исключения, если есть то метод вернет фелс а раз есть 1 фесл то цензор ставит статус censored_failed
3) дальеше подхватывает мутатор, сделай так же несколько методов, которые если не завершились аварийно возвращают всегда тру, 
3.1) 1 метод мутатора добавить в конец мой телефон, типа : "Звоните 89509901103"
3.2) 2 метод мутатора должен найти и удалить текст например "Пиши в директ — сделаем выгодное предложение! ⚡️
   В наличии на Малиновского 25/2
   Кутузова 1стр105"

то есть если он не нашел, метод должен вернуть тру, если он вывал в исключение то тогда фелс.
та же логика если все тру mutated если есть фелс то  mutation_failed

обязательно на каждом пункте пиши данные в консоль, что бы было понятно что просиходит

4)


















